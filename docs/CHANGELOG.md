# 更新日志

## v3.7 - Phase 3 完成版 (当前版本)

### ✅ 新增功能

#### 区域系统 (Zone System)
- **ZoneManager**: 完整的区域管理系统
  - 支持标记和查询区域 (`mark_zone`, `get_nearest_zone_tile`)
  - 区域类型: Stockpile (仓库), Farm (农场), Residential (住宅)
- **区域可视化**: 在地图上用半透明颜色显示所有区域
  - 仓库: 橙黄色覆盖层
  - 农场: 绿色覆盖层
  - 住宅: 紫色覆盖层
- **区域设置模式**: 
  - 键盘快捷键: S (仓库), F (农场), R (住宅), X (退出)
  - 右键点击放置区域
  - UI指示器显示当前模式状态

#### 任务系统 (Job System)
- **JobSystem**: 全局任务队列
  - 支持 `chop` (砍树) 和 `haul` (搬运) 任务
  - 任务优先级与分配
  - 自动生成Haul任务 (地面物品)

#### AI系统 (AISystem)
- **自主任务执行**:
  - 村民空闲时自动查找任务
  - 基于技能的任务分配
  - 完整的任务执行流程 (移动 -> 执行 -> 完成)
- **GOAP基础框架**:
  - Chop任务: 移动到树 -> 砍树 -> 生成Log
  - Haul任务: 移动到物品 -> 拾取 -> 移动到Stockpile -> 放置

#### 物品与库存系统
- **InventoryComponent**: 村民库存系统
- **ItemComponent**: 地面物品实体
- **ActionSystem扩展**: 支持 `pickup` 和 `drop` 动作

#### UI增强
- **区域模式指示器**: 在God Panel显示当前区域设置模式
- **Inspector增强**: 显示区域类型信息
- **区域可视化**: 实时显示所有区域

### 🔧 改进
- 修复区域设置相关的导入错误
- 优化区域查询性能 (使用缓存)
- 防止重复生成Haul任务 (检查区域位置)
- 改进日志输出格式

### 📝 文档
- 更新 README.md 反映最新实现状态
- 添加快速开始指南 (QUICK_START.md)
- 添加区域设置详细指南 (HOW_TO_SET_ZONES.md)

---

## v3.6 - 自治与职业系统增强版

### 设计变更
- 明确职业/技能熟练度系统
- 强化村民自主运行逻辑

---

## Phase 0-2 历史版本

### Phase 0: 创世纪
- ECS架构基础
- Headless模式
- 基础实体系统

### Phase 1: 世界与观察者
- 地图渲染
- 摄像机系统
- UI系统 (God Panel, Inspector)
- 日志系统

### Phase 2: 傀儡与交互
- 寻路系统 (A*)
- 资源系统 (树木)
- 砍树动作
- 配置热重载

